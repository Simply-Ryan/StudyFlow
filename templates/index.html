{% extends "base.html" %}

{% block title %}Home - Study Sessions{% endblock %}

{% block content %}
<div class="hero">
    <h1>Welcome to StudySync</h1>
    <p>Organize and join study sessions with your peers</p>
    {% if session.user_id %}
        <a href="{{ url_for('create') }}" class="btn-large">Create New Session</a>
    {% else %}
        <a href="{{ url_for('register') }}" class="btn-large">Get Started - Register Now</a>
    {% endif %}
</div>

{% if invitations %}
<section class="invitations-section">
    <h2>ğŸ“© Your Invitations</h2>
    <div class="invitations-list">
        {% for invitation in invitations %}
        <div class="invitation-card">
            <div class="invitation-header">
                <h3>{{ invitation.session_title }}</h3>
                <span class="badge badge-pending">Pending</span>
            </div>
            <p>{{ invitation.inviter_name }} invited you to join this study session</p>
            <div class="invitation-actions">
                <form method="POST" action="{{ url_for('respond_invitation', invitation_id=invitation.id) }}" style="display: inline;">
                    <input type="hidden" name="response" value="accept">
                    <button type="submit" class="btn-primary">Accept</button>
                </form>
                <form method="POST" action="{{ url_for('respond_invitation', invitation_id=invitation.id) }}" style="display: inline;">
                    <input type="hidden" name="response" value="decline">
                    <button type="submit" class="btn-secondary">Decline</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<section class="sessions-list">
    <h2>Available Study Sessions</h2>
    
    {% if sessions %}
        <div class="session-grid">
            {% for session in sessions %}
            <div class="session-card subject-{{ session.subject|replace(' ', '-')|lower }}">
                <div class="subject-badge">{{ session.subject }}</div>
                <h3>{{ session.title }}</h3>
                <p class="session-creator">Created by {{ session.creator_name }}</p>
                
                {% if session.session_date %}
                    <div class="session-time">
                        <span class="time-badge">â° {{ format_time_remaining(session.session_date) }}</span>
                    </div>
                {% endif %}
                
                <div class="session-info">
                    <span class="badge badge-{{ session.session_type }}">
                        {{ 'ğŸŒ Remote' if session.session_type == 'remote' else 'ğŸ“ In-Person' }}
                    </span>
                    {% if session.session_type == 'remote' and session.meeting_link %}
                        <p>ğŸ”— Meeting available</p>
                    {% elif session.session_type == 'in-person' and session.location %}
                        <p>ğŸ“ {{ session.location }}</p>
                    {% endif %}
                </div>
                <a href="{{ url_for('detail', session_id=session.id) }}" class="btn-secondary">View Details</a>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="empty-state">No study sessions yet. Be the first to create one!</p>
    {% endif %}
</section>
{% endblock %}